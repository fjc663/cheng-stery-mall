import{d as L,e as p,g as v,h as Q,b as e,L as u,M as _,p as o,N as r,t as c,D as i,o as U,_ as C}from"./index-CMV7StrB.js";import{u as h}from"./useUser-aX2g__mo.js";import"./http-Bo0dlXKR.js";import"./axios-BimPEqV4.js";import"./useCartItemsNumStore-BpwacNS2.js";import"./userApi-CmX0eGrO.js";import"./httpAdmin-C6IWq_Ob.js";const f="/assets/wechat-BSD494Rl.png",g="/assets/alipay-CmQTQUYJ.png",w="/assets/QQ-CgV9nvoz.png",z={class:"body"},k={class:"main-box"},N={class:"switch__container"},P=L({__name:"LoginView",setup(B){const t=p(!0),m=v.currentRoute.value.query;m.isLogin==0&&(t.value=!1);const s=p({username:"",email:"",password:"",comfirmPwd:""}),n=()=>{s.value={username:"",email:"",password:"",comfirmPwd:""}},{userLogin:b,userRegister:y}=h(),x=async()=>{if(await b(s.value)===1){const a=m.redirect||"/";v.push(a),n()}},V=async()=>{if(s.value.username=s.value.username.replace(/(^\s*)|(\s*$)/g,""),s.value.password=s.value.password.replace(/(^\s*)|(\s*$)/g,""),s.value.username.length<2||s.value.username.length>20){i.error("请输入字符长度2到20的用户名");return}var d=/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,4})$/;if(!d.test(s.value.email||"")){i.error("请输入正确的邮箱");return}if(s.value.password!=s.value.comfirmPwd){i.error("请确保两次密码输入相同");return}if(s.value.password.length<6||s.value.password.length>18){i.error("请输入字符长度6到18的密码");return}await y(s.value)===1&&(n(),t.value=!0)};return(d,a)=>(U(),Q("div",z,[e("div",k,[e("div",{class:u(["container","container-register",{"is-txl":t.value}])},[e("form",null,[a[7]||(a[7]=_('<h2 class="title" data-v-57c63ddb>注册</h2><div class="form__icons" data-v-57c63ddb><img class="form__icon" src="'+f+'" alt="微信登录" data-v-57c63ddb><img class="form__icon" src="'+g+'" alt="支付宝登录" data-v-57c63ddb><img class="form__icon" src="'+w+'" alt="QQ登录" data-v-57c63ddb></div><span class="text" data-v-57c63ddb>或使用邮箱进行注册</span>',3)),o(e("input",{class:"form__input",type:"text",placeholder:"请输入用户名","onUpdate:modelValue":a[0]||(a[0]=l=>s.value.username=l)},null,512),[[r,s.value.username]]),o(e("input",{class:"form__input",type:"text",placeholder:"请输入邮箱","onUpdate:modelValue":a[1]||(a[1]=l=>s.value.email=l)},null,512),[[r,s.value.email]]),o(e("input",{class:"form__input",type:"password",placeholder:"请输入密码","onUpdate:modelValue":a[2]||(a[2]=l=>s.value.password=l)},null,512),[[r,s.value.password]]),o(e("input",{class:"form__input",type:"password",placeholder:"请确认密码","onUpdate:modelValue":a[3]||(a[3]=l=>s.value.comfirmPwd=l)},null,512),[[r,s.value.comfirmPwd]]),e("div",{class:"form__button",onClick:V},"立即注册")])],2),e("div",{class:u(["container","container-login",{"is-txl is-z200":t.value}])},[e("form",null,[a[8]||(a[8]=_('<h2 class="title" data-v-57c63ddb>登录</h2><div class="form__icons" data-v-57c63ddb><img class="form__icon" src="'+f+'" alt="微信登录" data-v-57c63ddb><img class="form__icon" src="'+g+'" alt="支付宝登录" data-v-57c63ddb><img class="form__icon" src="'+w+'" alt="QQ登录" data-v-57c63ddb></div><span class="text" data-v-57c63ddb>或使用用户名登录</span>',3)),o(e("input",{class:"form__input",type:"text",placeholder:"请输入用户名","onUpdate:modelValue":a[4]||(a[4]=l=>s.value.username=l)},null,512),[[r,s.value.username]]),o(e("input",{class:"form__input",type:"password",placeholder:"请输入密码","onUpdate:modelValue":a[5]||(a[5]=l=>s.value.password=l)},null,512),[[r,s.value.password]]),e("div",{class:"form__button",onClick:x},"立即登录")])],2),e("div",{class:u(["switch",{login:t.value}])},[a[9]||(a[9]=e("div",{class:"switch__circle"},null,-1)),a[10]||(a[10]=e("div",{class:"switch__circle switch__circle_top"},null,-1)),e("div",N,[e("h2",null,c(t.value?"您好 !":"欢迎回来 !"),1),e("p",null,c(t.value?"如果您还没有账号，请点击下方立即注册按钮进行账号注册":"如果您已经注册过账号，请点击下方立即登录按钮进行登录"),1),e("div",{class:"form__button",onClick:a[6]||(a[6]=l=>{t.value=!t.value,n()})},c(t.value?"立即注册":"立即登录"),1)])],2)])]))}}),E=C(P,[["__scopeId","data-v-57c63ddb"]]);export{E as default};
