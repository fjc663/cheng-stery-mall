import{d as R,i as U,c as p,w as l,x as $,r as i,o as a,a as r,b as n,f as o,t as u,u as s,h as f,z as d,l as G,F as K,g as x,D as v,H as Q,_ as W}from"./index-CMV7StrB.js";import{u as X}from"./useOrder-mXwGJRjg.js";import{u as Y}from"./useCartItemsNumStore-BpwacNS2.js";import"./http-Bo0dlXKR.js";import"./axios-BimPEqV4.js";import"./httpAdmin-C6IWq_Ob.js";const Z={key:0},h={key:1},tt={key:2},et={key:3},st={class:"order-actions"},nt=R({__name:"OrderDetail",setup(lt){const A=Y(),I=$(),C=Number(I.params.orderId),{orderDetail:e,getOrderDetail:k,cancelOrder:B,buyagain:D,countdowns:M,formatTime:F,completeOrder:V}=X();U(()=>{k(C)});const S=async()=>{await D(e.value.id),A.getCartItemsNum(),x.push("/cart")},T=async()=>{await B(e.value.id)===1&&v.success("取消成功"),k(e.value.id)},j=()=>{x.push(`/pay/${C}`)},E=b=>{Q.confirm("确认完成订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await V(b),x.push("/orderManager"),k(e.value.id)}).catch(()=>{v.info("已取消")})};return(b,t)=>{const L=i("el-header"),g=i("el-col"),m=i("el-tag"),N=i("el-row"),w=i("el-card"),P=i("el-image"),y=i("el-table-column"),q=i("el-table"),c=i("el-button"),z=i("el-main"),H=i("el-container");return a(),p(H,{class:"order-detail-page"},{default:l(()=>[r(L,null,{default:l(()=>t[0]||(t[0]=[n("h1",{class:"order-detail-title"},"订单详情",-1)])),_:1}),r(z,null,{default:l(()=>[r(w,{class:"order-info"},{default:l(()=>[t[16]||(t[16]=n("h2",{class:"section-title"},"订单信息",-1)),r(N,null,{default:l(()=>[r(g,{span:8},{default:l(()=>[n("p",null,[t[1]||(t[1]=n("strong",null,"订单编号:",-1)),o(" "+u(s(e).orderNumber),1)]),n("p",null,[t[2]||(t[2]=n("strong",null,"下单时间:",-1)),o(" "+u(s(e).createdAt),1)]),s(e).status===2?(a(),f("p",Z,[t[3]||(t[3]=n("strong",null,"支付时间:",-1)),o(" "+u(s(e).paidAt),1)])):d("",!0),s(e).status===3?(a(),f("p",h,[t[4]||(t[4]=n("strong",null,"发货时间:",-1)),o(" "+u(s(e).shippedAt),1)])):d("",!0),s(e).status===4?(a(),f("p",tt,[t[5]||(t[5]=n("strong",null,"完成时间:",-1)),o(" "+u(s(e).completedAt),1)])):d("",!0),s(e).status===5?(a(),f("p",et,[t[6]||(t[6]=n("strong",null,"取消时间:",-1)),o(" "+u(s(e).canceledAt),1)])):d("",!0)]),_:1}),r(g,{span:8},{default:l(()=>[n("p",null,[t[12]||(t[12]=n("strong",null,"订单状态:",-1)),s(e).status===1?(a(),p(m,{key:0,type:"warning"},{default:l(()=>t[7]||(t[7]=[o("待支付")])),_:1})):d("",!0),s(e).status===1?(a(),p(m,{key:1,type:"danger",style:{margin:"10px"}},{default:l(()=>[o(u(s(F)(s(M)[s(e).id])),1)]),_:1})):d("",!0),s(e).status===2?(a(),p(m,{key:2,type:"success"},{default:l(()=>t[8]||(t[8]=[o("已支付")])),_:1})):d("",!0),s(e).status===3?(a(),p(m,{key:3,type:"info"},{default:l(()=>t[9]||(t[9]=[o("已发货")])),_:1})):d("",!0),s(e).status===4?(a(),p(m,{key:4,type:"primary"},{default:l(()=>t[10]||(t[10]=[o("已完成")])),_:1})):d("",!0),s(e).status===5?(a(),p(m,{key:5,type:"danger"},{default:l(()=>t[11]||(t[11]=[o("已取消")])),_:1})):d("",!0)]),n("p",null,[t[13]||(t[13]=n("strong",null,"支付方式:",-1)),o(" "+u(s(e).paymentMethod===1?"支付宝":s(e).paymentMethod===2?"微信":"信用卡"),1)])]),_:1}),r(g,{span:8},{default:l(()=>[n("p",null,[t[14]||(t[14]=n("strong",null,"总金额:",-1)),o(" ￥"+u(s(e).totalAmount.toFixed(2)),1)]),n("p",null,[t[15]||(t[15]=n("strong",null,"运费:",-1)),o(" ￥"+u(s(e).shippingCost.toFixed(2)),1)])]),_:1})]),_:1})]),_:1}),r(w,{class:"shipping-info"},{default:l(()=>[t[20]||(t[20]=n("h2",{class:"section-title"},"收货信息",-1)),r(N,null,{default:l(()=>[r(g,{span:8},{default:l(()=>[n("p",null,[t[17]||(t[17]=n("strong",null,"收货人:",-1)),o(" "+u(s(e).shippingAddress.replace(`
`," ").split(" ").slice(0,1).join("")),1)]),n("p",null,[t[18]||(t[18]=n("strong",null,"联系电话:",-1)),o(" "+u(s(e).shippingAddress.replace(`
`," ").split(" ").slice(1,2).join("")),1)])]),_:1}),r(g,{span:16},{default:l(()=>[n("p",null,[t[19]||(t[19]=n("strong",null,"收货地址:",-1)),o(" "+u(s(e).shippingAddress.replace(`
`," ").split(" ").slice(2).join("")),1)])]),_:1})]),_:1})]),_:1}),r(w,{class:"product-info"},{default:l(()=>[t[21]||(t[21]=n("h2",{class:"section-title"},"商品信息",-1)),r(q,{data:s(e).orderItemVOList,border:"",stripe:""},{default:l(()=>[r(y,{label:"商品图片",width:"120"},{default:l(_=>[r(P,{src:_.row.productImageUrl,class:"product-image",fit:"cover"},null,8,["src"])]),_:1}),r(y,{prop:"productName",label:"商品名称"}),r(y,{prop:"specifications",label:"规格"},{default:l(_=>[(a(!0),f(K,null,G(JSON.parse(_.row.specifications),(J,O)=>(a(),f("div",{key:O},[n("strong",null,u(O)+":",1),o(" "+u(J),1)]))),128))]),_:1}),r(y,{prop:"quantity",label:"数量"}),r(y,{prop:"productPrice",label:"单价"},{default:l(_=>[o("￥"+u(_.row.productPrice.toFixed(2)),1)]),_:1})]),_:1},8,["data"])]),_:1}),n("div",st,[s(e).status===1?(a(),p(c,{key:0,type:"danger",onClick:T},{default:l(()=>t[22]||(t[22]=[o("取消订单")])),_:1})):d("",!0),s(e).status===1?(a(),p(c,{key:1,type:"warning",onClick:j},{default:l(()=>t[23]||(t[23]=[o("支付订单")])),_:1})):d("",!0),s(e).status===3?(a(),p(c,{key:2,type:"success",onClick:E},{default:l(()=>t[24]||(t[24]=[o("完成订单")])),_:1})):d("",!0),s(e).status===4?(a(),p(c,{key:3,type:"primary",onClick:S},{default:l(()=>t[25]||(t[25]=[o("再次购买")])),_:1})):d("",!0)])]),_:1})]),_:1})}}}),it=W(nt,[["__scopeId","data-v-22dab33b"]]);export{it as default};
