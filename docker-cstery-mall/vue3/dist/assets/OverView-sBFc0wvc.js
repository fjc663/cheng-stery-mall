import{e as b,D as P,d as R,C as I,i as T,P as m,h as k,b as t,a,w as s,r as h,o as N,t as _,u as f,_ as M}from"./index-CMV7StrB.js";import{h as V}from"./httpAdmin-C6IWq_Ob.js";import"./axios-BimPEqV4.js";function W(u,l){return V({url:"admin/chart",params:{startData:u,endData:l}})}function j(u,l){return V({url:"admin/chart/data",params:{startData:u,endData:l}})}const E=b({totalSale:0,totalOrder:0,totalUser:0,hotProduct:""}),U=b({saleList:[],statusList:[],userList:[],productNameList:[],productList:[],dataList:[],cumulativeSaleList:[],cumulativeUserList:[]}),q=async(u,l)=>{const d=await W(u,l);if(d.code===0){P.error(d.msg);return}E.value=d.data},z=async(u,l)=>{const d=await j(u,l);if(d.code===0){P.error(d.msg);return}U.value=d.data};function F(){return{report:E,getReport:q,chartData:U,getChart:z}}const H={class:"dashboard-page"},J={class:"dashboard-header"},K={class:"dashboard-date"},Q={class:"stat-card"},X={class:"stat-value"},Y={class:"stat-card"},Z={class:"stat-value"},tt={class:"stat-card"},et={class:"stat-value"},at={class:"stat-card"},st={class:"stat-value"},ot=R({__name:"OverView",setup(u){const{report:l,getReport:d,chartData:o,getChart:$}=F(),g=new Date,D=new Date(g);D.setDate(g.getDate()-7);const p=b([D,g]),O=v=>new Date(+v+8*3600*1e3).toISOString().split("T")[0],S=I(()=>O(p.value[0])),A=I(()=>O(p.value[1]));T(()=>B());const B=async()=>{await d(S.value,A.value),await $(S.value,A.value);const v=m(document.getElementById("salesChart")),e={title:{text:"",left:"center"},tooltip:{trigger:"axis",formatter:i=>{const x=i[0].name,L=i[0].data,w=i[1].data;return`${x}<br/>销售额: ${L}<br/>累计销售额: ${w}`}},legend:{data:["销售额","累计销售额"],top:"10px"},xAxis:{type:"category",data:o.value.dataList},yAxis:{type:"value"},series:[{name:"销售额",data:o.value.saleList,type:"line",smooth:!0,color:"#5470C6"},{name:"累计销售额",data:o.value.cumulativeSaleList,type:"line",smooth:!0,color:"#91CC75"}]};v.setOption(e);const y=m(document.getElementById("orderStatusChart")),r={title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"订单状态",type:"pie",radius:["50%","70%"],data:[{value:o.value.statusList[0],name:"待支付"},{value:o.value.statusList[1],name:"已支付"},{value:o.value.statusList[2],name:"已发货"},{value:o.value.statusList[3],name:"已完成"},{value:o.value.statusList[4],name:"已取消"}]}]};y.setOption(r);const n=m(document.getElementById("userGrowthChart")),c={title:{text:"",left:"center"},tooltip:{trigger:"axis",formatter:i=>{const x=i[0].name,L=i[0].data,w=i[1].data;return`${x}<br/>用户增长: ${L}<br/>累计用户: ${w}`}},legend:{data:["用户增长","累计用户"],top:"10px"},xAxis:{type:"category",data:o.value.dataList},yAxis:{type:"value"},series:[{name:"用户增长",data:o.value.userList,type:"line",smooth:!0,color:"#5470C6"},{name:"累计用户",data:o.value.cumulativeUserList,type:"line",smooth:!0,color:"#91CC75"}]};n.setOption(c);const C=m(document.getElementById("topProductChart")),G={title:{text:"Top 10 热门商品",left:"center"},tooltip:{trigger:"axis",formatter:"{b0}: {c0}"},xAxis:{type:"category",data:o.value.productNameList,axisLabel:{rotate:30,interval:0}},yAxis:{type:"value"},series:[{name:"销量",data:o.value.productList,type:"bar",barWidth:"50%"}]};C.setOption(G)};return(v,e)=>{const y=h("el-date-picker"),r=h("el-card"),n=h("el-col"),c=h("el-row");return N(),k("div",H,[t("div",J,[e[1]||(e[1]=t("h1",null,"欢迎，管理员",-1)),t("div",K,[a(y,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=C=>p.value=C),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:B},null,8,["modelValue"])])]),a(c,{gutter:20,class:"dashboard-stats"},{default:s(()=>[a(n,{span:6},{default:s(()=>[a(r,null,{default:s(()=>[t("div",Q,[e[2]||(e[2]=t("div",{class:"stat-title"},"总销售额",-1)),t("div",X,_(f(l).totalSale),1)])]),_:1})]),_:1}),a(n,{span:6},{default:s(()=>[a(r,null,{default:s(()=>[t("div",Y,[e[3]||(e[3]=t("div",{class:"stat-title"},"订单总数",-1)),t("div",Z,_(f(l).totalOrder),1)])]),_:1})]),_:1}),a(n,{span:6},{default:s(()=>[a(r,null,{default:s(()=>[t("div",tt,[e[4]||(e[4]=t("div",{class:"stat-title"},"用户数量",-1)),t("div",et,_(f(l).totalUser),1)])]),_:1})]),_:1}),a(n,{span:6},{default:s(()=>[a(r,null,{default:s(()=>[t("div",at,[e[5]||(e[5]=t("div",{class:"stat-title"},"热门商品",-1)),t("div",st,_(f(l).hotProduct),1)])]),_:1})]),_:1})]),_:1}),a(c,{gutter:20,class:"dashboard-charts"},{default:s(()=>[a(n,{span:12},{default:s(()=>[a(r,null,{default:s(()=>e[6]||(e[6]=[t("h3",null,"销售趋势",-1),t("div",{id:"salesChart",class:"chart"},null,-1)])),_:1})]),_:1}),a(n,{span:12},{default:s(()=>[a(r,null,{default:s(()=>e[7]||(e[7]=[t("h3",null,"订单状态分布",-1),t("div",{id:"orderStatusChart",class:"chart"},null,-1)])),_:1})]),_:1})]),_:1}),a(c,{gutter:20,class:"dashboard-charts"},{default:s(()=>[a(n,{span:12},{default:s(()=>[a(r,null,{default:s(()=>e[8]||(e[8]=[t("h3",null,"用户增长趋势",-1),t("div",{id:"userGrowthChart",class:"chart"},null,-1)])),_:1})]),_:1}),a(n,{span:12},{default:s(()=>[a(r,null,{default:s(()=>e[9]||(e[9]=[t("h3",null,"Top 10 热门商品",-1),t("div",{id:"topProductChart",class:"chart"},null,-1)])),_:1})]),_:1})]),_:1})])}}}),dt=M(ot,[["__scopeId","data-v-c8aa7896"]]);export{dt as default};
