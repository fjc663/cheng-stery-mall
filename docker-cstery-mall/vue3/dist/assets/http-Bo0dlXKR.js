import{a as l}from"./axios-BimPEqV4.js";import{O as p,e as n,D as v,g as o}from"./index-CMV7StrB.js";const a=p("userInfo",()=>{const e=n(""),r=n(""),s=n("");function i(t){e.value=t}function c(t){r.value=t}function f(t){s.value=t}function m(){e.value="",r.value="",s.value=""}return{token:e,username:r,avatarUrl:s,setToken:i,setUsername:c,setAvatar:f,removeTokenAndUsername:m}},{persist:!0}),u=l.create({baseURL:"/api",timeout:5e3});u.interceptors.request.use(e=>{const r=a();return e.headers.authorization=r.token,e},e=>Promise.reject(e));u.interceptors.response.use(e=>e.data,e=>(e.response.status===401&&(v.warning("请先登录"),a().removeTokenAndUsername(),o.push({path:"/login",query:{redirect:o.currentRoute.value.fullPath}})),Promise.reject(e)));export{u as h,a as u};
