import{a as p}from"./axios-BimPEqV4.js";import{O as d,e as r,D as h,g as a}from"./index-CMV7StrB.js";const u=d("adminInfo",()=>{const e=r(""),n=r(""),o=r(""),s=r("");function c(t){e.value=t}function m(t){n.value=t}function f(t){o.value=t}function l(t){s.value=t}function v(){e.value="",n.value="",o.value="",s.value=""}return{token:e,username:n,avatarUrl:o,role:s,setToken:c,setUsername:m,setAvatar:f,remove:v,setRole:l}},{persist:!0}),i=p.create({baseURL:"/api",timeout:5e3});i.interceptors.request.use(e=>{const n=u();return e.headers.token=n.token,e},e=>Promise.reject(e));i.interceptors.response.use(e=>e.data,e=>(e.response.status===401&&(h.warning("请先登录"),u().remove(),a.push({path:"/adminLogin",query:{redirect:a.currentRoute.value.fullPath}})),Promise.reject(e)));export{i as h,u};
