import{u as F}from"./useProduct-D_j9yIew.js";import{d as I,e as g,i as R,c as v,w as n,x as T,j as $,r as t,k as M,o as i,a as o,b as l,h as f,l as G,p as H,t as p,f as J,u as y,F as K,_ as W}from"./index-CMV7StrB.js";import"./http-Bo0dlXKR.js";import"./axios-BimPEqV4.js";import"./httpAdmin-C6IWq_Ob.js";const X={class:"sort-bar"},Y={alt:"product image",class:"product-image"},Z={class:"product-info"},ee={class:"product-title"},te={class:"product-description"},oe={style:{"min-width":"80px","max-width":"500px","text-align":"center"}},ae={key:1},se={class:"product-price"},ne={class:"product-pagination-block"},le=I({__name:"searchView",setup(ce){const C=T(),h=$(),{products:k,totalProduct:b,pageQuery:a,pageQueryByCategoryId:d}=F(),r=g("none"),x=s=>{a.value.isOrderBypriceASC=s==="asc",a.value.isOrderBypriceDESC=s==="desc",d()},u=g(1),_=g(20),z=s=>{a.value.pageSize=s,d()},B=s=>{a.value.page=s,d()},S=s=>{h.push({path:`/productDetail/${s}`,query:{isDisplayBreadcrumb:0}})};R(()=>{a.value.page=u.value,a.value.pageSize=_.value,a.value.name=C.query.searchQuery,a.value.isALLData=!0,a.value.isOrderBypriceASC?r.value="asc":a.value.isOrderBypriceDESC?r.value="desc":r.value="none",d()});const w=()=>{h.back()};return(s,c)=>{const D=t("el-page-header"),m=t("el-option"),V=t("el-select"),O=t("el-header"),P=t("el-tooltip"),U=t("el-card"),A=t("el-col"),E=t("el-row"),L=t("el-pagination"),N=t("el-main"),Q=t("el-backtop"),j=t("el-container"),q=M("lazy");return i(),v(j,{class:"product-list-page"},{default:n(()=>[o(O,null,{default:n(()=>[o(D,{onBack:w}),l("div",X,[o(V,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=e=>r.value=e),placeholder:"价格排序",onChange:x},{default:n(()=>[o(m,{label:"默认排序",value:"none"}),o(m,{label:"价格升序",value:"asc"}),o(m,{label:"价格降序",value:"desc"})]),_:1},8,["modelValue"])])]),_:1}),o(N,null,{default:n(()=>[o(E,{gutter:20,class:"products-grid"},{default:n(()=>[(i(!0),f(K,null,G(y(k),e=>(i(),v(A,{xs:24,sm:12,md:8,lg:6,key:e.id},{default:n(()=>[o(U,{shadow:"hover",class:"product-card",onClick:re=>S(e.id)},{default:n(()=>[H(l("img",Y,null,512),[[q,e.imageUrl]]),l("div",Z,[l("h3",ee,p(e.name),1),l("p",te,[e.description.length>20?(i(),v(P,{key:0,placement:"bottom",effect:"light","popper-class":"custom-tooltip"},{content:n(()=>[l("div",oe,p(e.description),1)]),default:n(()=>[J(" "+p(e.description.slice(0,20)+"..."),1)]),_:2},1024)):(i(),f("span",ae,p(e.description),1))]),l("p",se,"￥"+p(e.price),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),l("div",ne,[o(L,{"current-page":u.value,"onUpdate:currentPage":c[1]||(c[1]=e=>u.value=e),"page-size":_.value,"onUpdate:pageSize":c[2]||(c[2]=e=>_.value=e),"page-sizes":[20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:y(b),onSizeChange:z,onCurrentChange:B},null,8,["current-page","page-size","total"])])]),_:1}),o(Q,{right:100,bottom:100})]),_:1})}}}),me=W(le,[["__scopeId","data-v-ad43e9ce"]]);export{me as default};
