import{c as l,d as f,f as p,s as w,p as A,h as g,r as v}from"./userApi-CmX0eGrO.js";import{e as n,D as a,g as P}from"./index-CMV7StrB.js";import{u as y}from"./httpAdmin-C6IWq_Ob.js";const o=y(),t=n({id:-1,username:"",email:"",phone:"",role:"",avatarUrl:"",gender:-1,lastLogin:""}),I=async s=>{s.username=s.username.replace(/(^\s*)|(\s*$)/g,""),s.password=s.password.replace(/(^\s*)|(\s*$)/g,"");const e=await l(s);return e.code===1?(a.success("登录成功"),o.setToken(e.data.token),o.setUsername(s.username),o.setAvatar(e.data.avatarUrl),o.setRole(e.data.role)):a.error(e.msg),e.code},c=()=>{o.remove(),P.push("/adminLogin")},U=async s=>{const e=await f(s);e.code===1?(a.success("密码修改成功"),s={oldPassword:"",newPassword:"",confirmPassword:""},c(),a.success("请用新密码登录")):a.error(e.msg)},d=async()=>{const s=await p();if(s.code===0){a.error(s.msg);return}t.value=s.data},L=async()=>{const s=await w(t.value);s.code===0?a.error(s.msg):a.success("保存成功"),d()},i=n({page:1,pageSize:10}),u=n(0),m=n([]),h=async()=>{const s=await A(i.value);if(s.code===0){a.error(s.msg);return}u.value=s.data.total,m.value=s.data.records},Q=async(s,e)=>{const r=await g(s,e);r.code===1?a.success("设置成功"):a.error(r.msg)},k=async(s,e)=>{const r=await v(s,e);return r.code===1?a.success("设置成功"):a.error(r.msg),r.code};function z(){return{admin:t,adminLogin:I,logout:c,editAdminPassword:U,getAdminUserInfo:d,saveAdminInfo:L,pageQuery:i,totalUser:u,users:m,pageQueryUser:h,setRole:Q,resetPassword:k}}export{z as u};
